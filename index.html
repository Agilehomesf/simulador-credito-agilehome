<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Crédito Hipotecario Multibanco Agile Home</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Custom CSS -->
 <link rel="stylesheet" href="estilos.css">
</head>
<body>
  <!-- Header -->
  <header class="bg-white py-3 shadow-sm">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-12 text-center">
          <h1 class="brand-title mb-0">Simulador de Crédito Hipotecario Multibanco Agile Home</h1>
          <p class="subtitle mb-0">Compare opciones de préstamos hipotecarios en Colombia</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="py-4">
    <div class="container">
      <!-- Introduction Card -->
      <div class="card mb-4">
        <div class="card-body">
          <h5 class="section-title">¿Cómo funciona?</h5>
          <p>Este simulador le permite calcular y comparar cuotas mensuales de créditos hipotecarios ofrecidos por diferentes bancos en Colombia. Ingrese los datos solicitados para obtener una estimación de sus pagos mensuales.</p>
          <div class="row mt-3">
            <div class="col-md-4 text-center mb-3 mb-md-0">
              <i class="bi bi-house-door fs-1 text-primary"></i>
              <h6 class="mt-2">Ingrese el valor de la vivienda</h6>
            </div>
            <div class="col-md-4 text-center mb-3 mb-md-0">
              <i class="bi bi-calculator fs-1 text-primary"></i>
              <h6 class="mt-2">Defina la cuota inicial y el plazo</h6>
            </div>
            <div class="col-md-4 text-center">
              <i class="bi bi-bank fs-1 text-primary"></i>
              <h6 class="mt-2">Compare entre diferentes bancos</h6>
            </div>
          </div>
        </div>
      </div>

      <!-- Error Messages Container -->
      <div id="validationErrors" class="d-none mb-4"></div>

      <!-- Loan Calculator Form -->
      <div class="card mb-4">
        <div class="card-header">
          Información del Préstamo
        </div>
        <div class="card-body">
          <form id="mortgageForm">
            <div class="row">
              <!-- Property Value -->
              <div class="col-md-6 mb-3">
                <label for="propertyValue">Valor de la vivienda <i class="bi bi-info-circle tooltip-icon" data-bs-toggle="tooltip" title="Ingrese el valor total de la propiedad que desea adquirir"></i></label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input type="text" class="form-control currency-input" id="propertyValue" placeholder="Ej. 200.000.000" required>
                </div>
              </div>

              <!-- Down Payment -->
              <div class="col-md-6 mb-3">
                <label for="downPayment">Cuota inicial <i class="bi bi-info-circle tooltip-icon" data-bs-toggle="tooltip" title="Se recomienda una cuota inicial de al menos 20% del valor de la vivienda"></i></label>
                <div class="input-group">
                  <span class="input-group-text">$</span>
                  <input type="text" class="form-control currency-input" id="downPayment" placeholder="Ej. 40.000.000" required>
                </div>
                <div class="d-flex justify-content-between">
                  <small class="text-muted">Equivale al <span id="downPaymentPercentage">0</span>% del valor</small>
                  <small id="downPaymentFeedback" class="error-message d-none"></small>
                </div>
              </div>

              <!-- Loan Amount Summary -->
              <div class="col-12 mb-3">
                <div class="alert alert-info">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <strong>Monto a financiar:</strong>
                    </div>
                    <div>
                      <strong>$<span id="loanAmount">0</span></strong>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Loan Term -->
              <div class="col-md-6 mb-3">
                <label for="loanTerm">Plazo en años <i class="bi bi-info-circle tooltip-icon" data-bs-toggle="tooltip" title="Período de tiempo para pagar el préstamo, entre 5 y 30 años"></i></label>
                <select class="form-select" id="loanTerm" required>
                  <option value="" selected disabled>Seleccione el plazo</option>
                  <option value="5">5 años</option>
                  <option value="10">10 años</option>
                  <option value="15">15 años</option>
                  <option value="20">20 años</option>
                  <option value="25">25 años</option>
                  <option value="30">30 años</option>
                </select>
                <small id="loanTermFeedback" class="error-message d-none"></small>
              </div>
            </div>

            <!-- Form Buttons -->
            <div class="d-flex justify-content-between mt-3">
              <button type="button" id="resetBtn" class="btn btn-outline-secondary">
                Reiniciar
              </button>
              <button type="button" id="calculateBtn" class="btn btn-primary">
                Calcular cuotas
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Results Section -->
      <div id="resultsContainer" class="d-none">
        <h3 class="section-title mb-4">
          Resultados de la Simulación
        </h3>
        
        <!-- Results Content -->
        <div id="resultsContent"></div>
        
        <!-- WhatsApp Contact Button -->
        <div class="text-center my-4">
          <br>
          <a href="https://wa.me/message/PMWO6BQHZCRSD1" target="_blank" class="btn btn-success btn-lg">
            <i class="bi bi-whatsapp me-2"></i>Contactar asesor por WhatsApp
          </a>
          <p class="text-muted mt-2"><small>Un asesor de Agile Home te brindará información detallada sobre tu simulación</small></p>
        </div>
        
        <!-- Comparison Chart -->
        <div class="card mt-4">
          <div class="card-header">
            <i class="bi bi-bar-chart-fill me-2"></i>Comparativa de Cuotas Mensuales
          </div>
          <div class="card-body">
            <div style="max-height: 250px;">
              <canvas id="comparisonChart" class="d-none" height="200"></canvas>
            </div>
          </div>
        </div>
        
        <!-- Interest Rate Heat Map -->
        <div class="card mt-4">
          <div class="card-header">
            <i class="bi bi-grid-3x3-gap me-2"></i>Mapa de Calor de Tasas de Interés
          </div>
          <div class="card-body">
            <p class="text-muted mb-3">Este mapa de calor muestra visualmente qué bancos ofrecen las mejores tasas de interés. Los colores más verdes indican tasas más bajas, mientras que los colores más rojos indican tasas más altas.</p>
            <div id="heatMapContainer" class="d-none">
              <div class="table-responsive">
                <table id="interestRateHeatMap" class="table table-bordered">
                  <thead class="table-primary">
                    <tr>
                      <th>Banco</th>
                      <th>Tasa EA</th>
                      <th>Tasa MV</th>
                      <th>Comparativa Visual</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Se llenará dinámicamente con JavaScript -->
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Disclaimer -->
        <div style="font-size: 0.9em; color: #555; margin-top: 20px;">
          <strong>Esta herramienta realiza estimaciones aproximadas en Pesos Colombianos (COP).</strong>
          <ul class="mb-0 mt-2">
            <li>Las tasas de interés y condiciones pueden variar según la política de cada entidad financiera.</li>
            <li>La cuota mensual no incluye seguros ni otros costos asociados.</li>
            <li>La tasa definitiva aplicará según las condiciones vigentes al momento del desembolso.</li>
            <li>Para conocer el detalle de cada banco, contacta a tu asesor de Agile Home.</li>
          </ul>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-8">
          <h5>Simulador de Crédito Hipotecario Multibanco Agile Home</h5>
          <div class="mb-0">
            <strong>Esta herramienta realiza estimaciones aproximadas en Pesos Colombianos (COP).</strong>
            <ul class="mb-0 mt-1">
              <li>Las tasas de interés y condiciones pueden variar según la política de cada entidad financiera.</li>
              <li>La cuota mensual no incluye seguros ni otros costos asociados.</li>
              <li>La tasa definitiva aplicará según las condiciones vigentes al momento del desembolso.</li>
              <li>Para conocer el detalle de cada banco, contacta a tu asesor de Agile Home.</li>
            </ul>
          </div>
        </div>
        <div class="col-md-4 text-md-end mt-3 mt-md-0">
          <p class="mb-0">© 2025 Simulador Multibanco Agile Home</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Custom JS -->
  <script src="calculadora.js">
</body>
</html>
